<!DOCTYPE html>
<html lang="fr">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>S√©ries ‚Äî MPG Priv√©</title>
<link rel="preconnect" href="https://fonts.googleapis.com">
<link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
<link href="https://fonts.googleapis.com/css2?family=Nunito:wght@400;600;700;800;900&display=swap" rel="stylesheet">
<style>
:root {
  --blue:#4054CC; --green:#45C945; --red:#C0303A;
  --grad:linear-gradient(135deg,#4054CC 0%,#45C945 100%);
  --bg:#F4F6F8; --surface:#FFFFFF; --border:#D8DAE8;
  --text:#1A1F2E; --muted:#959DAF;
}
*{box-sizing:border-box;margin:0;padding:0;}
body{font-family:'Nunito',sans-serif;background:var(--bg);color:var(--text);}

header{background:var(--grad);padding:40px 24px 48px;text-align:center;position:relative;overflow:hidden;}
header::before{content:'';position:absolute;inset:0;background:radial-gradient(circle at 70% 50%,rgba(255,255,255,.08) 0%,transparent 60%);}
.hbadge{display:inline-block;background:rgba(255,255,255,.2);color:#fff;font-size:12px;font-weight:700;letter-spacing:1.5px;text-transform:uppercase;padding:4px 14px;border-radius:20px;margin-bottom:14px;}
header h1{font-size:clamp(24px,4vw,40px);font-weight:900;color:#fff;letter-spacing:-.5px;}
header p{margin-top:10px;font-size:15px;color:rgba(255,255,255,.8);font-weight:600;}

main{max-width:1000px;margin:-20px auto 40px;padding:0 20px;position:relative;z-index:1;}
.section-title{font-size:14px;font-weight:700;color:var(--muted);text-transform:uppercase;letter-spacing:1px;margin-bottom:16px;}

/* ‚îÄ‚îÄ STREAKS GRID ‚îÄ‚îÄ */
.streaks-grid{display:grid;grid-template-columns:repeat(3,1fr);gap:20px;margin-bottom:28px;}
@media(max-width:700px){.streaks-grid{grid-template-columns:1fr;}}

.streak-block{background:var(--surface);border:1px solid var(--border);border-radius:16px;padding:20px 18px;box-shadow:0 2px 8px rgba(64,84,204,.06);}
.streak-block-title{font-size:13px;font-weight:800;margin-bottom:16px;display:flex;align-items:center;gap:8px;}
.streak-icon{font-size:18px;}

.streak-row{display:flex;align-items:center;gap:7px;margin-bottom:9px;}
.streak-rank{font-size:10px;font-weight:800;color:var(--muted);width:14px;text-align:right;flex-shrink:0;}
.streak-dot{width:7px;height:7px;border-radius:50%;flex-shrink:0;}
.streak-name{font-size:12px;font-weight:800;width:64px;flex-shrink:0;white-space:nowrap;overflow:hidden;text-overflow:ellipsis;}
.streak-bar-wrap{flex:1;background:var(--bg);border-radius:4px;height:12px;overflow:hidden;}
.streak-bar{height:100%;border-radius:4px;min-width:4px;}
.streak-value{font-size:13px;font-weight:900;width:22px;text-align:right;flex-shrink:0;}

/* ‚îÄ‚îÄ CURRENT STREAK ‚îÄ‚îÄ */
.current-wrap{background:var(--surface);border:1px solid var(--border);border-radius:16px;padding:24px;box-shadow:0 2px 8px rgba(64,84,204,.06);}
.current-grid{display:grid;grid-template-columns:repeat(4,1fr);gap:12px;margin-top:16px;}
@media(max-width:600px){.current-grid{grid-template-columns:repeat(2,1fr);}}

.current-card{border-radius:12px;padding:14px 10px;border:1.5px solid;text-align:center;}
.current-name{font-size:12px;font-weight:800;margin-bottom:6px;white-space:nowrap;overflow:hidden;text-overflow:ellipsis;}
.current-badge{font-size:24px;font-weight:900;line-height:1;}
.current-label{font-size:10px;font-weight:700;margin-top:5px;text-transform:uppercase;letter-spacing:.5px;}

footer{text-align:center;padding:28px;font-size:13px;color:var(--muted);font-weight:600;}
footer a{color:var(--blue);text-decoration:none;font-weight:700;}
footer span{background:var(--grad);-webkit-background-clip:text;-webkit-text-fill-color:transparent;font-weight:800;}
</style>
</head>
<body>

<header>
  <a href="index.html" style="position:absolute;top:16px;left:20px;font-size:12px;font-weight:700;color:rgba(255,255,255,0.9);text-decoration:none;background:rgba(255,255,255,0.18);padding:4px 12px;border-radius:16px;">‚Üê Accueil</a>
  <div class="hbadge">18 saisons ¬∑ cross-divisions</div>
  <h1>S√©ries Cons√©cutives</h1>
  <p>Records de s√©ries all-time ¬∑ Momentum en fin de S18</p>
</header>

<main>
  <div class="section-title">Records de s√©ries</div>
  <div class="streaks-grid" id="streaksGrid"></div>

  <div class="current-wrap">
    <div class="section-title">S√©rie en cours √† la fin de S18</div>
    <div class="current-grid" id="currentGrid"></div>
  </div>
</main>

<footer>
  Hors COVID ¬∑ Hors saison en cours ¬∑ <a href="index.html">Accueil</a> ¬∑ <span>MPG Assistant</span>
</footer>

<script>
const STREAKS=[{"pid":"raph","name":"Raph","color":"#C0303A","best_win":8,"best_unbeaten":10,"best_loss":5,"current_type":"W","current_length":1},{"pid":"damien","name":"Damien","color":"#C08A00","best_win":8,"best_unbeaten":10,"best_loss":5,"current_type":"W","current_length":1},{"pid":"nico","name":"Nico","color":"#2E6A99","best_win":7,"best_unbeaten":11,"best_loss":4,"current_type":"L","current_length":1},{"pid":"francois","name":"Fran√ßois","color":"#1E5C3A","best_win":6,"best_unbeaten":12,"best_loss":5,"current_type":"L","current_length":4},{"pid":"greg","name":"Greg","color":"#D4643A","best_win":5,"best_unbeaten":9,"best_loss":6,"current_type":"W","current_length":4},{"pid":"marc","name":"Marc","color":"#1A3D50","best_win":5,"best_unbeaten":7,"best_loss":6,"current_type":"W","current_length":3},{"pid":"pierre","name":"Pierre","color":"#2A8FA0","best_win":5,"best_unbeaten":7,"best_loss":10,"current_type":"L","current_length":2},{"pid":"manu","name":"Manu","color":"#7A1A1E","best_win":5,"best_unbeaten":7,"best_loss":5,"current_type":"L","current_length":1}];

// ‚îÄ‚îÄ Config ‚îÄ‚îÄ
const TYPE_LABEL = { W: 'Victoires', D: 'Nuls', L: 'D√©faites' };
const TYPE_COLOR = { W: '#45C945', D: '#4054CC', L: '#C0303A' };
const TYPE_BG    = { W: 'rgba(69,201,69,0.10)', D: 'rgba(64,84,204,0.10)', L: 'rgba(192,48,58,0.10)' };
const TYPE_BORDER= { W: 'rgba(69,201,69,0.45)', D: 'rgba(64,84,204,0.40)', L: 'rgba(192,48,58,0.45)' };
const TYPE_EMOJI = { W: 'üî•', D: '‚è∏Ô∏è', L: '‚ùÑÔ∏è' };

// ‚îÄ‚îÄ Streak blocks ‚îÄ‚îÄ
function renderBlock(container, title, icon, color, key, sortDir) {
  const block = document.createElement('div');
  block.className = 'streak-block';

  const sorted = [...STREAKS].sort((a, b) => sortDir * (b[key] - a[key]));
  const maxVal = sorted[0][key] || 1;

  block.innerHTML = `<div class="streak-block-title"><span class="streak-icon">${icon}</span>${title}</div>`;

  sorted.forEach((p, i) => {
    const val = p[key];
    const pct = (val / maxVal * 100).toFixed(1);
    const row = document.createElement('div');
    row.className = 'streak-row';
    row.innerHTML = `
      <span class="streak-rank">${i + 1}</span>
      <span class="streak-dot" style="background:${p.color}"></span>
      <span class="streak-name" title="${p.name}">${p.name}</span>
      <div class="streak-bar-wrap">
        <div class="streak-bar" style="width:${pct}%;background:${color}"></div>
      </div>
      <span class="streak-value" style="color:${color}">${val}</span>
    `;
    block.appendChild(row);
  });

  container.appendChild(block);
}

const grid = document.getElementById('streaksGrid');
renderBlock(grid, 'S√©rie de victoires',   'üî•', '#45C945', 'best_win',      1);
renderBlock(grid, 'Invaincu (V + N)',      'üõ°Ô∏è', '#4054CC', 'best_unbeaten', 1);
renderBlock(grid, 'S√©rie de d√©faites',    'üíÄ', '#C0303A', 'best_loss',     1);

// ‚îÄ‚îÄ Current streak cards ‚îÄ‚îÄ
const curGrid = document.getElementById('currentGrid');
// Sort: W first, then D, then L; within same type by length desc
const typeOrder = { W: 0, D: 1, L: 2 };
const sortedCur = [...STREAKS].sort((a, b) =>
  typeOrder[a.current_type] - typeOrder[b.current_type] ||
  b.current_length - a.current_length
);

sortedCur.forEach(p => {
  const t = p.current_type;
  const card = document.createElement('div');
  card.className = 'current-card';
  card.style.background  = TYPE_BG[t];
  card.style.borderColor = TYPE_BORDER[t];
  card.innerHTML = `
    <div class="current-name" style="color:${p.color}">${p.name}</div>
    <div class="current-badge" style="color:${TYPE_COLOR[t]}">${p.current_length}${t === 'W' ? 'V' : t === 'D' ? 'N' : 'D'}</div>
    <div class="current-label" style="color:${TYPE_COLOR[t]}">${TYPE_EMOJI[t]} ${TYPE_LABEL[t]}</div>
  `;
  curGrid.appendChild(card);
});
</script>
</body>
</html>
